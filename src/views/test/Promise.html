<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
  let checklogin = function () {
    return new Promise(function (resolve, reject) {
      let flag = document.cookie.indexOf("userId") > -1;
      if (flag=true) {
        resolve({
          status: 0,
          result: true
        })
      } else {
        reject("error")
      }
    })
  }

  let getUserInfo = () => {
    return new Promise((resolve, reject) => {
      let userInfo = {
        userId: '101'
      }
      resolve(userInfo)
    })
  }

  checklogin().then(function (res) {
    if (res.status === 0) {
      console.log("login successful")
      return getUserInfo()
    }
  }).catch(err => {
    console.log(`error:${err}`)
  }).then(res => {
    console.log(`userId:${res.userId}`)
  })
</script>
</body>
</html>
